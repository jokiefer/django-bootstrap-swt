{% extends 'skeletons/accordion.html' %}
{% block ajax_script %}
<script type="application/javascript">
$("#{{accordion_id}}_collapsible").on('show.bs.collapse', function(e) {
    if ($(this).is(e.target)) {
        $( '#{{accordion_id}}_body [data-toggle="tooltip"]' ).tooltip("hide");
        $( '#{{accordion_id}}_body' ).html( `{% include 'django_bootstrap_swt/includes/ajax_loading_spinner.html' %}` );
        $.ajax({
          url: "{{ fetch_url }}",
          success: function( data ) {
            $( '#{{accordion_id}}_body' ).html( data );
            $( '#{{accordion_id}}_body [data-toggle="tooltip"]' ).tooltip();
          },
          error: function() {
            $( '#{{accordion_id}}_body' ).html( `{% include 'django_bootstrap_swt/includes/ajax_error.html' %}` );
          },
        });
    }
  })
</script>
{% endblock %}